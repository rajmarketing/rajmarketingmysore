<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Raj Marketing Admin Panel</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <style>
    :root {
      --admin-bg: #22223b;
      --admin-accent: #ffb300;
      --admin-card: #39375b;
      --admin-menu: #282848;
      --admin-menu-text: #fff;
      --admin-menu-hover: #ffb300;
      --admin-content-bg: #f8faff;
      --admin-font: 'Orbitron', 'Roboto Mono', monospace, Arial, sans-serif;
      --admin-font2: 'Roboto Mono', monospace, Arial, sans-serif;
      --admin-success: #28c76f;
      --admin-danger: #ff5252;
      --admin-warning: #fbbf24;
      --transition: 0.21s cubic-bezier(0.82, 0.09, 0.26, 1.09);
    }
    * { box-sizing: border-box; margin: 0; padding: 0;}
    body {
      font-family: var(--admin-font2);
      background: var(--admin-bg);
      color: #fff;
      min-height: 100vh;
      letter-spacing: 0.03em;
    }
    .admin-header {
      background: linear-gradient(85deg, var(--admin-accent) 0%, #ffcc80 80%);
      padding: 32px 0 19px 0;
      text-align: center;
      font-family: var(--admin-font);
      font-size: 2.1rem;
      font-weight: 800;
      letter-spacing: 3px;
      box-shadow: 0 6px 30px #ffb30040;
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    /* Hamburger */
    .menu-toggle {
      background: none;
      border: none;
      margin-left: 18px;
      width: 48px; height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      display: none;
      z-index: 1200;
    }
    .menu-toggle .fa-bars {
      font-size: 2.1rem;
      color: #fff;
      filter: drop-shadow(0 2px 4px #0008);
    }
    /* Layout */
    .admin-layout {
      display: flex;
      min-height: 84vh;
    }
    .admin-menu {
      background: var(--admin-menu);
      width: 240px;
      padding: 34px 0 0 0;
      display: flex;
      flex-direction: column;
      gap: 7px;
      box-shadow: 2px 0 16px #0001;
      min-height: 100vh;
      position: relative;
      transition: left var(--transition);
      z-index: 1100;
    }
    .admin-menu a {
      color: var(--admin-menu-text);
      text-decoration: none;
      padding: 15px 42px 15px 28px;
      font-size: 1.13rem;
      font-family: var(--admin-font);
      font-weight: 700;
      border-left: 5px solid transparent;
      transition: background 0.2s, color 0.2s, border-left 0.2s, letter-spacing 0.2s;
      letter-spacing: 1.5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .admin-menu a.active, .admin-menu a:hover {
      background: var(--admin-menu-hover);
      color: #222;
      border-left: 5px solid #fff;
      letter-spacing: 2.2px;
    }
    /* Mobile menu overlay */
    .admin-menu.mobile {
      position: fixed;
      top: 0; left: -250px;
      height: 100vh;
      width: 250px;
      border-radius: 0 30px 30px 0;
      transition: left var(--transition);
      z-index: 1201;
    }
    .admin-menu.mobile.open { left: 0; }
    .menu-overlay {
      display: none;
      position: fixed;
      z-index: 1200;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.3);
    }
    .menu-overlay.show { display: block; }
    /* Content */
    .admin-content {
      flex: 1;
      background: var(--admin-content-bg);
      color: #23213a;
      padding: 40px 60px 30px 60px;
      font-family: var(--admin-font2);
      min-height: 500px;
      border-radius: 0 0 0 32px;
      box-shadow: 0 2px 24px #ffb30014;
      overflow: auto;
      transition: filter 0.18s;
    }
    .admin-card {
      background: var(--admin-card);
      color: #fff;
      border-radius: 18px;
      padding: 28px 32px;
      margin-bottom: 30px;
      box-shadow: 0 2px 18px #0002;
      font-family: var(--admin-font2);
      font-size: 1.16rem;
    }
    .admin-title {
      font-size: 1.5rem;
      font-family: var(--admin-font);
      margin-bottom: 10px;
      color: var(--admin-accent);
      letter-spacing: 1.5px;
      font-weight: 800;
    }
    .admin-table {
      width: 100%;
      border-collapse: collapse;
      margin: 18px 0 6px 0;
      background: #fff1;
      color: #fff;
      border-radius: 8px;
      font-size: 1rem;
      overflow-x: auto;
    }
    .admin-table th, .admin-table td {
      padding: 12px 10px;
      border-bottom: 1px solid #444;
    }
    .admin-table th { background: #2e2e4e; color: var(--admin-accent);}
    .admin-table td { font-size: 1.02rem;}
    .admin-table tr:last-child td { border-bottom: none; }
    /* Stats Cards */
    .stats-cards {
      display: flex;
      gap: 22px;
      margin-bottom: 34px;
      flex-wrap: wrap;
    }
    .stats-card {
      background: #fff2;
      color: #ffb300;
      border-radius: 12px;
      padding: 23px 28px;
      font-size: 1.37rem;
      font-family: var(--admin-font);
      font-weight: 700;
      min-width: 180px;
      text-align: center;
      box-shadow: 0 1px 6px #0003;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .stats-card .fa-solid { font-size: 2rem; }
    /* Gallery */
    .gallery-upload {
      margin: 18px 0 12px 0;
    }
    .gallery-preview {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 18px;
    }
    .gallery-thumb {
      width: 120px; height: 90px;
      border-radius: 7px;
      overflow: hidden;
      background: #fff3;
      box-shadow: 0 1px 5px #0002;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .gallery-thumb img {
      width: 100%; height: 100%; object-fit: cover;
      display: block;
    }
    .gallery-thumb .del-btn {
      position: absolute;
      top: 4px; right: 4px;
      background: #ff5252;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 24px; height: 24px;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 1px 4px #0004;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Responsive Design */
    @media (max-width: 900px) {
      .admin-layout { flex-direction: column; }
      .admin-menu { 
        flex-direction: column; 
        width: 100vw; 
        min-height: unset; 
        position: fixed; 
        left: -100vw; 
        top: 0; 
        border-radius: 0 0 30px 30px;
      }
      .admin-menu.open { left: 0; }
      .menu-toggle { display: flex; }
      .admin-content { padding: 22px 4vw;}
      .stats-cards { flex-direction: column; gap: 13px;}
      .admin-header { font-size: 1.3rem; padding: 20px 0 14px 0;}
      .admin-title { font-size: 1.13rem; }
      .admin-card { padding: 14px 7vw;}
    }
    @media (max-width: 500px) {
      .admin-header { font-size: 1.13rem; }
      .admin-title { font-size: 1rem; }
      .admin-card { padding: 7px 2vw;}
      .admin-content { padding: 8px 1vw;}
      .gallery-thumb { width: 70px; height: 54px; }
    }
    /* Modal */
    .modal-bg {
      background: #000a;
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-box {
      background: #fff;
      border-radius: 14px;
      padding: 40px 34px 30px 34px;
      box-shadow: 0 6px 42px #ffb30033;
      text-align: center;
      max-width: 345px;
      width: 90vw;
      font-family: var(--admin-font2);
      color: #222;
      animation: fadeIn 0.6s;
    }
    @keyframes fadeIn {
      from { transform: scale(0.93) translateY(38px); opacity: 0; }
      to { transform: scale(1) translateY(0); opacity: 1;}
    }
    .modal-title {
      font-family: var(--admin-font);
      color: var(--admin-accent);
      font-size: 1.22rem;
      font-weight: 700;
      margin-bottom: 14px;
      letter-spacing: 2px;
    }
    .modal-box input[type="password"] {
      width: 96%;
      padding: 13px 12px;
      border: 2px solid #e5e7eb;
      border-radius: 9px;
      font-size: 1.13rem;
      margin-bottom: 18px;
      margin-top: 6px;
      background: #f8f8fc;
      font-family: var(--admin-font2);
      outline: none;
      transition: border 0.2s;
    }
    .modal-box input[type="password"]:focus {
      border-color: var(--admin-accent);
    }
    .modal-box button {
      background: var(--admin-accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 11px 32px;
      font-size: 1.06rem;
      font-family: var(--admin-font2);
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 2px 10px #ffb30022;
      margin-bottom: 8px;
      margin-top: 4px;
      transition: background 0.18s;
    }
    .modal-box button:hover {
      background: #ffd85c;
      color: #222;
    }
    .modal-error {
      color: var(--admin-danger);
      font-size: 1rem;
      margin-top: 7px;
      font-weight: 700;
      min-height: 22px;
      letter-spacing: 0.2px;
    }
  </style>
</head>
<body>
<!-- Modal for password -->
<div class="modal-bg" id="adminModal">
  <div class="modal-box">
    <div class="modal-title">Admin Login</div>
    <form id="adminLoginForm" autocomplete="off">
      <input type="password" id="adminPassword" placeholder="Enter Admin Password" required autofocus>
      <br>
      <button type="submit">Access Admin</button>
      <div class="modal-error" id="modalError"></div>
    </form>
  </div>
</div>
<div class="admin-header">
  <button class="menu-toggle" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>
  <span style="color:#fff; filter:drop-shadow(0 2px 8px #ffb30030);"><i class="fa-solid fa-shield-halved"></i> Raj Marketing Admin</span>
</div>
<div class="menu-overlay"></div>
<div class="admin-layout">
  <nav class="admin-menu" id="adminMenu">
    <a data-page="dashboard" class="active"><i class="fa-solid fa-gauge"></i> Dashboard</a>
    <a data-page="analytics"><i class="fa-solid fa-chart-line"></i> Analytics</a>
    <a data-page="appointments"><i class="fa-solid fa-calendar-check"></i> Appointments</a>
    <a data-page="estimates"><i class="fa-solid fa-calculator"></i> Estimates</a>
    <a data-page="contacts"><i class="fa-solid fa-envelope"></i> Contacts</a>
    <a data-page="gallery"><i class="fa-solid fa-images"></i> Gallery</a>
    <a data-page="pages"><i class="fa-solid fa-file"></i> Pages</a>
    <a data-page="team"><i class="fa-solid fa-users"></i> Team</a>
    <a data-page="settings"><i class="fa-solid fa-gear"></i> Settings</a>
    <a data-page="logout" style="color:var(--admin-danger);"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
  </nav>
  <main class="admin-content" id="adminContent">
    <!-- Dynamic content loaded here -->
  </main>
</div>
<!-- SCRIPTS -->
<script>
  // --- Password Protection ---
  const ADMIN_PASS = "admin@2025";
  let loggedIn = false;
  function showModal(show = true, error = '') {
    document.getElementById('adminModal').style.display = show ? 'flex' : 'none';
    document.getElementById('modalError').textContent = error;
    if (show) document.getElementById('adminPassword').focus();
  }
  document.getElementById('adminLoginForm').onsubmit = function(e) {
    e.preventDefault();
    const pw = document.getElementById('adminPassword').value.trim();
    if (pw === ADMIN_PASS) {
      loggedIn = true;
      localStorage.setItem('rajmarketing-admin', 'true');
      showModal(false);
    } else {
      document.getElementById('modalError').textContent = 'Incorrect password!';
      document.getElementById('adminPassword').value = '';
      document.getElementById('adminPassword').focus();
    }
  };
  window.onload = function() {
    if (localStorage.getItem('rajmarketing-admin') === 'true') {
      showModal(false);
      loadPage('dashboard');
    } else {
      showModal(true);
    }
  };

  // --- Mobile Hamburger Menu ---
  const menuToggle = document.querySelector('.menu-toggle');
  const menu = document.getElementById('adminMenu');
  const overlay = document.querySelector('.menu-overlay');
  function openMenu() {
    menu.classList.add('open', 'mobile');
    overlay.classList.add('show');
    document.body.style.overflow = 'hidden';
  }
  function closeMenu() {
    menu.classList.remove('open', 'mobile');
    overlay.classList.remove('show');
    document.body.style.overflow = '';
  }
  menuToggle.addEventListener('click', function(e){
    if (menu.classList.contains('open')) closeMenu();
    else openMenu();
  });
  overlay.addEventListener('click', closeMenu);

  // --- Navigation & Pages ---
  const pages = {
    dashboard: `
      <div class="admin-title">Welcome to Admin Dashboard</div>
      <div class="stats-cards">
        <div class="stats-card"><i class="fa-solid fa-users"></i> <span id="stat-visitors">0</span><br>Visitors Today</div>
        <div class="stats-card"><i class="fa-solid fa-calendar-check"></i> <span id="stat-appointments">0</span><br>Appointments</div>
        <div class="stats-card"><i class="fa-solid fa-envelope"></i> <span id="stat-contacts">0</span><br>New Contacts</div>
        <div class="stats-card"><i class="fa-solid fa-chart-line"></i> <span id="stat-top-page">-</span><br>Top Page</div>
      </div>
      <div class="admin-card">
        <div class="admin-title">Quick Overview</div>
        <ul style="line-height:1.8; color:#ffb300; margin-left:1.2em;">
          <li>Live visitor stats & most visited pages</li>
          <li>View daily/weekly/monthly analytics</li>
          <li>Manage all appointments and estimates</li>
          <li>Upload or update gallery images instantly</li>
          <li>Track contact form responses</li>
        </ul>
      </div>
    `,
    analytics: `
      <div class="admin-title">Visitor Analytics</div>
      <div class="admin-card">
        <form style="margin-bottom:18px;">
          <label>Show:
            <select id="analytics-range">
              <option value="today">Today</option>
              <option value="week">This Week</option>
              <option value="month">This Month</option>
              <option value="all">All Time</option>
            </select>
          </label>
        </form>
        <table class="admin-table" id="analyticsTable">
          <thead>
            <tr><th>Date</th><th>Visits</th><th>Top Page</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    `,
    appointments: `
      <div class="admin-title">Appointments</div>
      <div class="admin-card">
        <table class="admin-table" id="apptTable">
          <thead>
            <tr><th>ID</th><th>Name</th><th>Date</th><th>Status</th><th>Action</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    `,
    estimates: `
      <div class="admin-title">Customer Estimates</div>
      <div class="admin-card">
        <table class="admin-table" id="estimateTable">
          <thead>
            <tr><th>ID</th><th>Name</th><th>Date</th><th>Details</th><th>Status</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    `,
    contacts: `
      <div class="admin-title">Contact Form Reports</div>
      <div class="admin-card">
        <table class="admin-table" id="contactTable">
          <thead>
            <tr><th>ID</th><th>Name</th><th>Email</th><th>Date</th><th>Message</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    `,
    gallery: `
      <div class="admin-title">Gallery Manager</div>
      <div class="admin-card">
        <form id="galleryUploadForm" class="gallery-upload">
          <input type="file" id="galleryInput" accept="image/*" multiple required>
          <button type="submit" style="margin-left:12px;"><i class="fa-solid fa-upload"></i> Upload</button>
        </form>
        <div class="gallery-preview" id="galleryPreview"></div>
        <div style="color:#ffb300; margin-top:8px;">New images will show on the home page instantly!</div>
      </div>
    `,
    pages: `
      <div class="admin-title">Most Visited Pages</div>
      <div class="admin-card">
        <table class="admin-table" id="pagesTable">
          <thead>
            <tr><th>Page</th><th>Visits</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    `,
    team: `
      <div class="admin-title">Team Management</div>
      <div class="admin-card">
        <p>Manage admin and staff logins, add new users, set roles and permissions (feature coming soon).</p>
      </div>
    `,
    settings: `
      <div class="admin-title">Admin Settings</div>
      <div class="admin-card">
        <button onclick="localStorage.removeItem('rajmarketing-admin'); location.reload();" style="background:#ff5252; color:#fff; border:none; border-radius:7px; padding:9px 22px; font-weight:700; cursor:pointer;">
          <i class="fa-solid fa-right-from-bracket"></i> Logout
        </button>
        <p style="margin-top:18px;">Change password, notification preferences &amp; more (feature coming soon).</p>
      </div>
    `,
    logout: `
      <div class="admin-card">
        <div class="admin-title" style="color:var(--admin-danger);">You have been logged out.</div>
        <p>Return to the login screen to re-enter admin password.</p>
      </div>
    `
  };

  // Navigation click
  document.getElementById('adminMenu').addEventListener('click', function(e) {
    if (e.target.closest('a')) {
      const a = e.target.closest('a');
      const page = a.getAttribute('data-page');
      // Remove active from all
      [...this.querySelectorAll('a')].forEach(a => a.classList.remove('active'));
      a.classList.add('active');
      if (page === 'logout') {
        localStorage.removeItem('rajmarketing-admin');
        showModal(true, 'Logged out.');
        document.getElementById('adminContent').innerHTML = pages.logout;
        closeMenu();
      } else if (pages[page]) {
        loadPage(page);
        closeMenu();
      }
    }
  });

  function loadPage(page) {
    document.getElementById('adminContent').innerHTML = pages[page] || '';
    if (page === 'dashboard') loadDashboardStats();
    if (page === 'analytics') loadAnalytics();
    if (page === 'appointments') loadAppointments();
    if (page === 'estimates') loadEstimates();
    if (page === 'contacts') loadContacts();
    if (page === 'gallery') setupGallery();
    if (page === 'pages') loadPagesStats();
  }

  // --- Demo Data/Handlers (Replace with backend AJAX in real use) ---
  function loadDashboardStats() {
    document.getElementById('stat-visitors').textContent = 128;
    document.getElementById('stat-appointments').textContent = 7;
    document.getElementById('stat-contacts').textContent = 2;
    document.getElementById('stat-top-page').textContent = "Products";
  }
  function loadAnalytics() {
    const rows = [
      ['2025-07-07', 128, 'Products'],
      ['2025-07-06', 152, 'Gallery'],
      ['2025-07-05', 97, 'Estimate'],
      ['2025-07-04', 101, 'Home'],
    ];
    const tbody = document.querySelector('#analyticsTable tbody');
    tbody.innerHTML = rows.map(r => `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td></tr>`).join('');
    document.getElementById('analytics-range').onchange = function(){
      // Dynamic filter (stub)
      loadAnalytics();
    }
  }
  function loadAppointments() {
    const rows = [
      [123, "Ravi Kumar", "2025-07-07", "Completed", '<button>View</button>'],
      [124, "Anu S", "2025-07-06", "Pending", '<button>View</button>'],
    ];
    document.querySelector('#apptTable tbody').innerHTML = rows.map(r =>
      `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td><td>${r[4]}</td></tr>`
    ).join('');
  }
  function loadEstimates() {
    const rows = [
      [201, "Shiva R", "2025-07-06", "3 Windows", "New"],
      [202, "Deepa T", "2025-07-05", "Balcony Door", "Follow-up"]
    ];
    document.querySelector('#estimateTable tbody').innerHTML = rows.map(r =>
      `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td><td>${r[4]}</td></tr>`
    ).join('');
  }
  function loadContacts() {
    const rows = [
      [3101, "Krishna", "krishna@gmail.com", "2025-07-07", "Need net for 2 doors"],
      [3102, "Jaya", "jaya@yahoo.com", "2025-07-05", "Cost for pleated net?"]
    ];
    document.querySelector('#contactTable tbody').innerHTML = rows.map(r =>
      `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td><td>${r[4]}</td></tr>`
    ).join('');
  }
  function loadPagesStats() {
    const rows = [
      ["index.html", 2500],
      ["products.html", 1850],
      ["gallery.html", 1700],
      ["estimate.html", 1200],
    ];
    document.querySelector('#pagesTable tbody').innerHTML = rows.map(r =>
      `<tr><td>${r[0]}</td><td>${r[1]}</td></tr>`
    ).join('');
  }
  // --- Gallery Upload/Preview (front-end only, replace with server logic for prod) ---
  function setupGallery() {
    let galleryImages = JSON.parse(localStorage.getItem('rajmarketing-gallery')||'[]');
    function renderGallery() {
      const cont = document.getElementById('galleryPreview');
      if (!cont) return;
      cont.innerHTML = galleryImages.map((url,i) => `
        <div class="gallery-thumb">
          <img src="${url}" alt="Gallery ${i+1}">
          <button class="del-btn" data-idx="${i}" title="Delete"><i class="fa-solid fa-xmark"></i></button>
        </div>
      `).join('');
      cont.querySelectorAll('.del-btn').forEach(btn=>{
        btn.onclick = ()=>{
          galleryImages.splice(+btn.dataset.idx, 1);
          localStorage.setItem('rajmarketing-gallery', JSON.stringify(galleryImages));
          renderGallery();
          syncGalleryToHome();
        }
      });
      syncGalleryToHome();
    }
    
